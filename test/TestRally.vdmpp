class TestRally is subclass of TestSuite
	
	instance variables
	
		s1: Section := new Section("Venezia", "Bologna", 248.41);
		s2: Section := new Section("Milano", "Verona", 175.32);
		s3: Section := new Section("Lisboa", "Porto", 300);
		s4: Section := new Section("Viseu", "Porto", 120);
		
		sec1: Sector := new Sector("Troco1", 20);
		sec2: Sector := new Sector("Troco2", 30);
		
		sections1: seq of Section := [s1, s2];
		sections2: seq of Section := [s3, s4];
		allSections: seq of Section := sections1 ^ sections2;
		
		p1: Pilot := new Pilot("Sébastien", "Loeb", 43, <Male>, <Pilot>);
		cp1: Pilot := new Pilot("Daniel", "Elena", 45, <Male>, <CoPilot>);
		c1: Car := new Car("Ford", 1271.71, 2.5, 275.5);
		t1: Team := new Team("M-Sport World Rally Team", p1, cp1, c1);
		
		p2: Pilot := new Pilot("Sébastien", "Ogier", 34, <Male>, <Pilot>);
		cp2: Pilot := new Pilot("Julien", "Ingrassia", 38, <Male>, <CoPilot>);
		c2: Car := new Car("Volkswagen", 1200, 3.5, 250);
		t2: Team := new Team("M-Sport World Rally Team", p2, cp2, c2);
		
		participants: set of Team := {t1, t2};
		
		d1: Day := new Day(sections1, participants);
		d2: Day := new Day(sections2, participants);
		
		days: seq of Day := [d1, d2];
		
		r: Rally := new Rally(<TimeTrial>, "Italy", days, participants);


	operations
	
  	public testConstructor() == (
  	
  		IO`println("\t\t test constructor");
  		
  		assertEqual(<TimeTrial>, r.category);
  		assertEqual("Italy", r.local);
  		assertEqual("Venezia", r.days(1).sections(1).startLocation);
    	assertTrue(t1 in set r.participants);
    	assertTrue(t2 in set r.participants);
    	
  	);
  	
  	public testMapTeamSections() == (
  			
  		r.mapTeamSections();
  		--r.days(1).sections(1).addSector(sec1);
  		--IO`printf("\t\t Team1 sections: %s\n", [r.teamSections(t1)]);
  		--IO`printf("\t\t Team2 sections: %s\n", [r.teamSections(t2)]);
  		
  		assertEqual(allSections, r.teamSections(t1));
  		assertEqual(allSections, r.teamSections(t2));
  	);

  	public testAll() == (
    	IO`println("\t rally tests");
    	testConstructor();
    	testMapTeamSections();
  	);

end TestRally